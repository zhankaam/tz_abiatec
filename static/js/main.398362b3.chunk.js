(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{15:function(t,e,c){},28:function(t,e,c){},30:function(t,e,c){},35:function(t,e,c){},36:function(t,e,c){},55:function(t,e,c){},56:function(t,e,c){"use strict";c.r(e);var n,a=c(0),r=c.n(a),i=c(7),o=c.n(i),s=(c(28),c(4)),u=c(5),l=(c(15),c(1)),j=function(t){return Object(l.jsx)("button",Object(u.a)({className:"button"},t))},E=(c(30),c(3)),O=c(13);!function(t){t.FETCH_CHARACTERS="APP/FETCH_CHARACTERS",t.FETCH_MORE_CHARACTERS="APP/FETCH_MORE_CHARACTERS",t.SET_APP_ERROR="APP/SET_APP_ERROR",t.SET_TOTAL_PAGE="APP/SET_TOTAL_PAGE",t.SET_NEXT_PAGE="APP/SET_NEXT_PAGE",t.REMOVE_CHARACTERS="APP/REMOVE_CHARACTERS",t.TOGGLE_IS_FETCHING="APP/TOGGLE_IS_FETCHING"}(n||(n={}));var b={characters:[],totalPage:[],nextPage:"",isFetching:!0,error:""},h=function(t){return{type:n.FETCH_MORE_CHARACTERS,payload:{characters:t}}},d=function(){return{type:n.REMOVE_CHARACTERS,payload:{characters:[]}}},T=function(t){return{type:n.SET_TOTAL_PAGE,payload:{totalPage:t}}},p=function(t){return{type:n.SET_NEXT_PAGE,payload:{nextPage:t}}},A=function(t){return{type:n.TOGGLE_IS_FETCHING,payload:{isFetching:t}}},_=function(t){return{type:n.SET_APP_ERROR,payload:{error:t}}},f=c(14),C=Object(f.a)({app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case n.FETCH_MORE_CHARACTERS:return Object(u.a)(Object(u.a)({},t),{},{characters:[].concat(Object(O.a)(t.characters),Object(O.a)(e.payload.characters))});case n.FETCH_CHARACTERS:case n.REMOVE_CHARACTERS:case n.SET_TOTAL_PAGE:case n.SET_NEXT_PAGE:case n.TOGGLE_IS_FETCHING:case n.SET_APP_ERROR:return Object(u.a)(Object(u.a)({},t),e.payload);default:return t}}}),R=Object(f.b)(C),S=E.c,P=function(t){return t.app.characters},g=function(t){return t.app.error},x=function(t){return t.app.isFetching},v=function(t){return t.app.nextPage},H=function(t){return t.app.totalPage},m=function(t){var e=t.onSearch,c=Object(a.useState)(""),n=Object(s.a)(c,2),r=n[0],i=n[1],o=Object(E.b)(),u=S(g),O=Object(a.useCallback)((function(t){i(t.target.value),u&&o(_(""))}),[u,o]),b=Object(a.useCallback)((function(){return e(r)}),[r,e]);return Object(l.jsxs)("div",{className:"SearchInput",children:[Object(l.jsx)("input",{value:r,onChange:O}),Object(l.jsx)(j,{onClick:b,children:"Submit"})]})},y=c.p+"static/media/logo.e1f86449.svg",G=(c(35),function(t){var e=t.onSearch;return Object(l.jsxs)("header",{className:"Header",children:[Object(l.jsx)("img",{src:y,className:"Header-logo",alt:"logo"}),Object(l.jsx)(m,{onSearch:e})]})}),F=(c(36),function(t){var e=t.content;return Object(l.jsx)("ul",{className:"contentList",children:e.map((function(t){var e=t.id,c=t.image,n=t.name,a=t.species,r=t.location;return Object(l.jsxs)("li",{children:[Object(l.jsx)("img",{width:200,src:c,alt:n}),Object(l.jsxs)("div",{children:[Object(l.jsx)("b",{children:"Name:"}),n," (",a,")"]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("b",{children:"Location: "}),r.name]})]},e)}))})}),N=c(12),k=c.n(N),L=k.a.create({baseURL:"https://rickandmortyapi.com/api/character"}),M=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return"?page=".concat(e,"&name=").concat(t)},I=function(){var t=Object(a.useState)([]),e=Object(s.a)(t,2),c=e[0],r=e[1],i=Object(E.b)();return[Object(a.useCallback)((function(t){try{(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return L.get(M(t))})(t).then((function(t){if(t.data){var e=t.data.results;r(e.slice(0,10)),i(d()),i((c=e.slice(0,10),{type:n.FETCH_CHARACTERS,payload:{characters:c}})),i(T(e)),i(p(t.data.info.next)),e.length>10&&i(A(!0))}var c}))}catch(e){i(d()),i(_(e.response.data.error)),i(A(!1))}}),[i]),c,Object(a.useCallback)((function(t,e,c){var n;t[t.length-1].id!==e[e.length-1].id?i(h(e.slice(10))):(n=c,k.a.get(n)).then((function(t){if(t.data){var e=t.data.results;i(T(e)),i(h(e.slice(0,10))),i(p(t.data.info.next))}}))}),[i])]},w=(c(55),function(t){var e=t.onClick;return Object(l.jsx)("div",{className:"fetchMore",children:Object(l.jsx)(j,{onClick:e,children:" Fetch More"})})}),V=function(){var t=I(),e=Object(s.a)(t,3),c=e[0],n=e[1],r=e[2],i=Object(a.useState)(!0),o=Object(s.a)(i,2),u=o[0],j=o[1],O=S(P),b=S(H),h=S(v),d=S(x),T=S(g),p=Object(E.b)();Object(a.useEffect)((function(){u&&(c(),j(!1))}),[u,c]);return 0!==O.length&&0!==b.length?h||O[O.length-1].id!==b[b.length-1].id||p(A(!1)):0===O.length?p(A(!1)):p(A(!0)),Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(G,{onSearch:c}),Object(l.jsx)("h1",{children:"Simple content list"}),Object(l.jsx)("h2",{children:T}),Object(l.jsx)(F,{content:O||n}),d&&Object(l.jsx)(w,{onClick:function(){r(O||n,b,h)}})]})};o.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(E.a,{store:R,children:Object(l.jsx)(V,{})})}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.398362b3.chunk.js.map